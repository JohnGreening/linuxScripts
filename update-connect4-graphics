#!/bin/bash

# ====== Config (edit these) ======
SRC_DIR="/home/john/Downloads/spritedesign"
DEST_DIR="/home/john/dev/connect4"

INC_FILE="connect4.inc"
STT_FILE="connect4.stt"
ASM_FILE="connect4.asm"
# ================================

set -u

copy_or_fail() {
  local src="$1" dst="$2"
  echo "Copying $(basename "$src") -> $dst"
  cp "$src" "$dst" || {
    echo "Failed to copy $(basename "$src")"
    exit 1
  }
}

# Step 1: Copy graphics include file (.inc)
copy_or_fail "$SRC_DIR/$INC_FILE" "$DEST_DIR/"

# Step 2: Copy sprite/tile state file (.stt)
copy_or_fail "$SRC_DIR/$STT_FILE" "$DEST_DIR/"

# Step 3: Change to project directory
echo "Changing directory to $DEST_DIR"
cd "$DEST_DIR" || {
  echo "Failed to change to $DEST_DIR"
  exit 1
}

# Step 4: Build the ASM
echo "Building $ASM_FILE"
build-next "$ASM_FILE"

